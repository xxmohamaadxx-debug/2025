# ุชุญุฏูุซ ุดุงูู ููุธุงู ุงููุฎุฒูู ูุงููุญุฑููุงุช

## ๐ ููุฎุต ุงูุชุญุฏูุซุงุช

ุชู ุฅุถุงูุฉ ูููุฒุงุช ุดุงููุฉ ูููุธุงู ุชุดูู:

### 1. โ ุชุญุณููุงุช ูุธุงู ุงููุฎุฒูู

#### ุฃ. ุฑูุฒ ุงูููุชุฌ (ุงุฎุชูุงุฑู)
- ุญูู `product_code` ุงุฎุชูุงุฑู ูู ุฌุฏูู ุงูููุชุฌุงุช
- ูููู ุชุฑู ุญูู ุงูุฑูุฒ ูุงุฑุบุงู ุนูุฏ ุฅุถุงูุฉ ููุชุฌ
- ููุฑุณ ุณุฑูุน ููุจุญุซ ุจุงูุฑูุฒ

#### ุจ. ุฅุญุตุงุฆูุงุช ุงููุชููุฑ
- ุฏุงูุฉ `getInventoryStatistics` ุชููุฑ:
  - ุฅุฌูุงูู ุนุฏุฏ ุงูุนูุงุตุฑ
  - ุฅุฌูุงูู ุงููููุฉ
  - ุงููููุฉ ุงูุฅุฌูุงููุฉ ูููุฎุฒูู
  - ูุชูุณุท ุงููููุฉ ููููุชุฌ
  - ุฃูู ูุฃูุซุฑ ุงููููุงุช
  - ุนุฏุฏ ุงูููุชุฌุงุช ุงูููููุตุฉ
  - ุนุฏุฏ ุงููุฆุงุช ุงููุฎุชููุฉ

#### ุฌ. ุณุฌู ุงูุชุบููุฑุงุช
- ูู ุชุญุฏูุซ ูููุฎุฒูู ูุชู ุชุณุฌููู ูู ุญูู `changes_history`
- ูุญุชูุธ ุจูุนูููุงุช:
  - ูู ุฃุฌุฑู ุงูุชุบููุฑ
  - ุงูุชุงุฑูุฎ ูุงูููุช
  - ุงููููุฉ ุงููุฏููุฉ ูุงูุฌุฏูุฏุฉ
  - ููุน ุงูุชุบููุฑ

#### ุฏ. ุงููุฆุงุช ูุงูุฃูุณุงู
- ูู ููุชุฌ ูููู ุฅุณูุงุฏู ุฅูู ูุฆุฉ/ูุณู
- ุชุตููุฉ ุงูููุชุฌุงุช ุญุณุจ ุงููุฆุฉ
- ุฅุญุตุงุฆูุงุช ูููุตูุฉ ููู ูุฆุฉ

### 2. โ ุชูุจููุงุช ุงููุฎุฒูู ุงููุชูุฏูุฉ

#### ุฎุตุงุฆุตูุง:
- **ูุงุจูุฉ ููุชุฎุตูุต**: ูู ูุชุฌุฑ ูุญุฏุฏ ุญุฏู ุงูุฎุงุต ููุชูุจูู
- **ูุงุจูุฉ ููุชูุนูู/ุงูุชุนุทูู**: ูููู ุชูุนูููุง ุฃู ุชุนุทูููุง ุญุณุจ ุงูุญุงุฌุฉ
- **ูุชุนุฏุฏุฉ ุงูุญุงูุงุช**:
  - ๐ด **ALERT**: ุงููููุฉ = ุฃู ุฃูู ูู ุงูุญุฏ
  - ๐ **WARNING**: ุงููููุฉ ุจูู ุงูุญุฏ ู 1.5 * ุงูุญุฏ
  - ๐ข **OK**: ุงููููุฉ ููู 1.5 * ุงูุญุฏ

#### ุงูุฏูุงู ุงููุชุงุญุฉ:
```javascript
// ุงูุญุตูู ุนูู ุฌููุน ุงูุชูุจููุงุช
neonService.getLowStockAlerts(tenantId)

// ุฅูุดุงุก ุชูุจูู
neonService.createLowStockAlert(tenantId, data)

// ุชุญุฏูุซ ุชูุจูู
neonService.updateLowStockAlert(alertId, data, tenantId)

// ุญุฐู ุชูุจูู
neonService.deleteLowStockAlert(alertId, tenantId)

// ุงูุชุญูู ูู ุงูุญุฏูุฏ
neonService.checkLowStockAlerts(tenantId)
```

### 3. โ ูุธุงู ุชุณุฌูู ุงูุตุงุฏุฑุงุช ุงูุชููุงุฆู

ุนูุฏ ุฅูุดุงุก ูุงุชูุฑุฉ ุตุงุฏุฑุฉ (invoices_out):
1. ูุชู ุฎุตู ุงููููุฉ ูู ุงููุฎุฒูู ุชููุงุฆูุงู
2. ูุชู ุชุณุฌูู ุงูุญุฑูุฉ ูู `inventory_transactions`
3. ูุชู ุชุญุฏูุซ ุณุฌู ุงูุชุบููุฑุงุช
4. ูุชู ุงูุชุญูู ูู ุงูุชูุจููุงุช ุงูููุฎูุถุฉ

### 4. โ ูุธุงู ุฅุฏุงุฑุฉ ุนุฏุงุฏุงุช ุงููุญุฑููุงุช

#### ุงูููุฒุงุช ุงูุฑุฆูุณูุฉ:

**ุฃ. ูุฑุชุจุท ุจููุน ุงููุชุฌุฑ**
- ูุชุงุญ ููุท ูููุชุงุฌุฑ ุงูุชู ุชุญุชูู ุนูู `fuel_management` ูู features
- ุฃู ููุน ูุชุฌุฑ ูุญุชูู ุนูู "fuel" ูู ุงูููุฏ
- ุฃูุซูุฉ: "fuel", "general_with_fuel", "fuel_station"

**ุจ. 6 ุนุฏุงุฏุงุช ูุงุจูุฉ ููุชุฎุตูุต**
- ูู ุนุฏุงุฏ ูู:
  - ุงุณู ูุฎุตุต (ุงูุจูุฒูู 95ุ ุงูุฏูุฒูุ ุฅูุฎ)
  - ุฑูู ูุฑูุฏ (1-6) ููู ูุชุฌุฑ
  - ุณุนุฑ ุจูุน ููุชุฑ ุงููุงุญุฏ
  - ูุฑุงุกุฉ ุฃูููุฉ ูุญุงููุฉ

**ุฌ. ุณุฌู ุงูุญุฑูุงุช**
- ูู ุญุฑูุฉ ุชุณุฌู:
  - ุงููุฑุงุกุฉ ูุจู ูุงููุฑุงุกุฉ ุจุนุฏ
  - ุงููููุฉ ุงููุจุงุนุฉ (ุงููุญุณูุจุฉ ุชููุงุฆูุงู)
  - ุงููุจูุบ ุงูุฅุฌูุงูู
  - ุงูุณุนุฑ ุงููุณุชุฎุฏู
  - ุฑุจุท ุจุงููุงุชูุฑุฉ (ุฅู ูุฌุฏุช)
  - ุงูููุงุญุธุงุช

**ุฏ. ุงูุณุฌูุงุช ุงูููููุฉ**
- ุชูุฑูุฑ ูููู ููู ุนุฏุงุฏ ูุชุถูู:
  - ุงููุฑุงุกุฉ ุงูุงูุชุชุงุญูุฉ ูุงูุฎุชุงููุฉ
  - ุฅุฌูุงูู ุงููุจุงุน ูู ุงูููู
  - ุฅุฌูุงูู ุงูุฅูุฑุงุฏุงุช

#### ุงูุฏูุงู ุงููุชุงุญุฉ:

```javascript
// ุงูุชุญูู ูู ุฏุนู ุงููุชุฌุฑ
neonService.checkStoreSupportsFuel(tenantId)

// ุฅุฏุงุฑุฉ ุงูุนุฏุงุฏุงุช
neonService.getFuelCounters(tenantId)
neonService.getFuelCounter(counterId, tenantId)
neonService.createFuelCounter(tenantId, data)
neonService.updateFuelCounter(counterId, data, tenantId)
neonService.deleteFuelCounter(counterId, tenantId)

// ุฅุฏุงุฑุฉ ุงูุญุฑูุงุช
neonService.getFuelCounterMovements(tenantId, counterId?)
neonService.recordFuelCounterMovement(tenantId, data)

// ุงูุณุฌูุงุช ุงูููููุฉ
neonService.getFuelDailyLogs(tenantId, counterId?, dateFrom?, dateTo?)
neonService.createFuelDailyLog(tenantId, counterId, logDate)

// ุงูููุฎุต ูุงูุฅุญุตุงุฆูุงุช
neonService.getFuelCountersSummary(tenantId)
```

### 5. ๐ ุงูุตูุญุงุช ูุงูููููุงุช

#### ุตูุญุฉ ุฌุฏูุฏุฉ:
- **FuelCountersManagementPage.jsx** - ุฅุฏุงุฑุฉ ุนุฏุงุฏุงุช ุงููุญุฑููุงุช
  - ุชุญูู ูู ุฏุนู ุงููุชุฌุฑ ูููุญุฑููุงุช
  - ุนุฑุถ ููุฎุต ุงูุนุฏุงุฏุงุช
  - ุฅุถุงูุฉ/ุชุนุฏูู/ุญุฐู ุงูุนุฏุงุฏุงุช
  - ุชุณุฌูู ุงูุญุฑูุงุช
  - ุนุฑุถ ุงูุณุฌู ุงููููู

#### ููููุงุช ุฌุฏูุฏุฉ:
- **FuelCountersDialog.jsx** - ุญูุงุฑ ุฅุถุงูุฉ/ุชุนุฏูู ุงูุนุฏุงุฏุงุช
- **FuelCounterMovementsTable.jsx** - ุฌุฏูู ุงูุญุฑูุงุช ุงููุณุฌูุฉ

### 6. ๐๏ธ ุชุบููุฑุงุช ูุงุนุฏุฉ ุงูุจูุงูุงุช

#### ุฌุฏุงูู ุฌุฏูุฏุฉ:
1. **inventory_low_stock_alerts** - ุชูุจููุงุช ุงููุฎุฒูู ุงูููุฎูุถ
2. **fuel_counters** - ุนุฏุงุฏุงุช ุงููุญุฑููุงุช ุงูุฑุฆูุณูุฉ
3. **fuel_counter_movements** - ุณุฌู ุญุฑูุงุช ุงูุนุฏุงุฏุงุช
4. **fuel_daily_log** - ุงูุณุฌูุงุช ุงูููููุฉ ููุนุฏุงุฏุงุช

#### ุฃุนูุฏุฉ ุฌุฏูุฏุฉ:
- `inventory_items.product_code` - ุฑูุฒ ุงูููุชุฌ
- `inventory_items.category` - ูุฆุฉ ุงูููุชุฌ
- `inventory_items.changes_history` - ุณุฌู ุงูุชุบููุฑุงุช
- `invoices_out.category` - ูุฆุฉ ุงููุงุชูุฑุฉ ุงูุตุงุฏุฑุฉ
- `invoices_out.changes_history` - ุณุฌู ุชุบููุฑุงุช ุงููุงุชูุฑุฉ
- `invoices_in.category` - ูุฆุฉ ุงููุงุชูุฑุฉ ุงููุงุฑุฏุฉ
- `invoices_in.changes_history` - ุณุฌู ุชุบููุฑุงุช ุงููุงุชูุฑุฉ

#### ุงูุฏูุงู ุงูุฌุฏูุฏุฉ:
1. **track_inventory_changes()** - ุชุณุฌูู ุชุบููุฑุงุช ุงููุฎุฒูู
2. **track_invoice_changes()** - ุชุณุฌูู ุชุบููุฑุงุช ุงูููุงุชูุฑ
3. **auto_deduct_inventory_on_export()** - ุฎุตู ุงููุฎุฒูู ุนูุฏ ุงูุชุตุฏูุฑ
4. **check_low_stock_alerts()** - ุงูุชุญูู ูู ุงูุชูุจููุงุช
5. **calculate_fuel_counter_totals()** - ุญุณุงุจ ููุฎุต ุงูุนุฏุงุฏ
6. **record_fuel_counter_movement()** - ุชุณุฌูู ุญุฑูุฉ ุนุฏุงุฏ
7. **create_daily_fuel_log()** - ุฅูุดุงุก ุณุฌู ูููู
8. **check_store_supports_fuel()** - ุงูุชุญูู ูู ุฏุนู ุงููุญุฑููุงุช

### 7. ๐ ุงูุฃูุงู ูุงูุชุญูู

- ุงูุชุญูู ูู ุฃู ุงููุชุฌุฑ ูุฏุนู ุงููุญุฑููุงุช ูุจู ุงูุณูุงุญ ุจุฅุถุงูุฉ ุนุฏุงุฏุงุช
- ุงูุญุฏ ุงูุฃูุตู ููุนุฏุงุฏุงุช ูู 6 ููู ูุชุฌุฑ
- ุนุฏู ุงูุณูุงุญ ุจุฑูู ุนุฏุงุฏ ููุฑุฑ
- ุงูุชุญูู ูู ุงูุชูุงุก ุงูุจูุงูุงุช ูููุชุฌุฑ ุงูุตุญูุญ

### 8. ๐ ุงูุญุณุงุจุงุช ุงูุชููุงุฆูุฉ

#### ูููุญุฑููุงุช:
- ุงููููุฉ ุงููุจุงุนุฉ = ุงููุฑุงุกุฉ ูุจู - ุงููุฑุงุกุฉ ุจุนุฏ
- ุงููุจูุบ ุงูุฅุฌูุงูู = ุงููููุฉ * ุณุนุฑ ุงูุจูุน ููุชุฑ
- ุงููุชุจูู = ุงููุฑุงุกุฉ ุงูุฃูููุฉ - ุฅุฌูุงูู ุงููุจุงุน
- ุงูุฅูุฑุงุฏ ุงููุชููุน = ุงููุฑุงุกุฉ ุงูุญุงููุฉ * ุงูุณุนุฑ ููุชุฑ

#### ูููุฎุฒูู:
- ุงูุฎุตู ุงูุชููุงุฆู ูู ุงููุฎุฒูู ุนูุฏ ุงููุงุชูุฑุฉ ุงูุตุงุฏุฑุฉ
- ุชุญุฏูุซ ุณุฌู ุงูุชุบููุฑุงุช ุชููุงุฆูุงู
- ุฅุนุงุฏุฉ ุญุณุงุจ ุงูุฅุญุตุงุฆูุงุช ุชููุงุฆูุงู

---

## ๐ ููููุฉ ุงูุงุณุชุฎุฏุงู

### 1. ุชุทุจูู ููู ุงูุชุฑุญูู
```sql
-- ูู ุจุชุดุบูู UPDATE_INVENTORY_AND_FUEL_SYSTEMS.sql ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
```

### 2. ุงููุตูู ุฅูู ุงูููุฒุงุช ุงูุฌุฏูุฏุฉ

#### ูุธุงู ุงููุญุฑููุงุช:
1. ุงูุชูู ุฅูู ุตูุญุฉ "ุฅุฏุงุฑุฉ ุนุฏุงุฏุงุช ุงููุญุฑููุงุช"
2. ุชุฃูุฏ ูู ุฃู ุงููุชุฌุฑ ูุฏุนู ุงููุญุฑููุงุช
3. ุฃุถู ุนุฏุงุฏุงุช ุฌุฏูุฏุฉ (ุญุชู 6 ุนุฏุงุฏุงุช)
4. ุณุฌู ุงูุญุฑูุงุช ุงูููููุฉ
5. ุงุนุฑุถ ุงูููุฎุต ูุงูุฅุญุตุงุฆูุงุช

#### ุชูุจููุงุช ุงููุฎุฒูู:
1. ูู ุฅุนุฏุงุฏุงุช ุงููุชุฌุฑุ ุฃุถู ุชูุจููุงุช ูุฎุฒูู
2. ุญุฏุฏ ุงูุญุฏ ุงูุฃุฏูู ููู ููุชุฌ
3. ุงููุธุงู ุณูุญุฐุฑู ุนูุฏ ุงูุฎูุงุถ ุงููุฎุฒูู

---

## ๐ ููุงุญุธุงุช ูููุฉ

- ุฌููุน ุงูุญุณุงุจุงุช ุชุชู ุชููุงุฆูุงู
- ุณุฌู ุงูุชุบููุฑุงุช ูุญุชูุธ ุจุชุงุฑูุฎ ูุงูู ููุชุนุฏููุงุช
- ูููู ุชุนุทูู ุงูุชูุจููุงุช ุฏูู ุญุฐููุง
- ุงูุนุฏุงุฏุงุช ูุฑุชุจุทุฉ ุจููุน ุงููุชุฌุฑ ูููุณุช ูุชุงุญุฉ ููุฌููุน

---

**ุขุฎุฑ ุชุญุฏูุซ:** 28 ููููุจุฑ 2025
**ุงูุฅุตุฏุงุฑ:** 2.0.0
