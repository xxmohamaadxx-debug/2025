# โ ุชูุฑูุฑ ุงูุชูููุฐ ุงูุดุงูู ูููุชุทูุจุงุช

**ุงูุชุงุฑูุฎ:** 28 ููููุจุฑ 2025

---

## ๐ ููุฎุต ุงูุชูููุฐ

ุชู ุชูููุฐ ุฌููุน ุงููุชุทูุจุงุช ุงููุทููุจุฉ ุจูุฌุงุญ. ุฅููู ุงูุชูุงุตูู ุงููุงููุฉ:

---

## 1๏ธโฃ โ ุฑูุฒ ุงูููุชุฌ (ุงุฎุชูุงุฑู ูู ููุงุฐุฌ ุงูุฅุฏุฎุงู)

### ุงูุญุงูุฉ: **ููุชูู**

**ุงูุชูุงุตูู:**
- โ ุญูู `product_code` ุฅุถุงูู ูู ุงููููุฐุฌ
- โ ุฌุนู ุงูุญูู ุงุฎุชูุงุฑู (ุบูุฑ ูุทููุจ)
- โ ูุน ุงูุญูุงุธ ุนูู ุญูู `sku` ููุชูุงูููุฉ
- โ ุนุฏู ูุฑุถ ุฅุฏุฎุงู ุฑูุฒ ุงูููุชุฌ

**ุงููููุงุช ุงููุนุฏูุฉ:**
- `src/components/inventory/InventoryDialog.jsx`
- `UPDATE_INVENTORY_AND_FUEL_SYSTEMS.sql` - ุฃุถูู ุนููุฏ `product_code`

---

## 2๏ธโฃ โ ุฅุญุตุงุฆูุงุช ุงููุชููุฑ ูู ูู ุตู

### ุงูุญุงูุฉ: **ููุชูู**

**ุงูุชูุงุตูู:**
- โ ุนุฑุถ ุฅุญุตุงุฆูุฉ ููุฑูุฉ ูู ูููุฐุฌ ุงูุฅุฏุฎุงู
- โ ุนุฑุถ ุงููููุฉ ุงููุชููุฑุฉ
- โ ุนุฑุถ ุงูุญุฏ ุงูุฃุฏูู ุงููุทููุจ
- โ ุนุฑุถ ุญุงูุฉ ุงููุฎุฒูู (ููุฎูุถ/ุชุญุฐูุฑ/ูุชููุฑ)
- โ ุชูููู ุฏููุงูููู ุญุณุจ ุงูุญุงูุฉ:
  - ๐ด ุฃุญูุฑ: ููุฎูุถ (โค ุงูุญุฏ ุงูุฃุฏูู)
  - ๐ ุฃุตูุฑ: ุชุญุฐูุฑ (โค 1.5 ร ุงูุญุฏ)
  - ๐ข ุฃุฎุถุฑ: ูุชููุฑ (> 1.5 ร ุงูุญุฏ)

**ูุซุงู ุงูุฅุญุตุงุฆูุฉ:**
```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ ุงููููุฉ ุงููุชููุฑุฉ: 45.50 piece       โ
โ ุงูุญุฏ ุงูุฃุฏูู: 10.00 piece           โ
โ ุญุงูุฉ ุงููุฎุฒูู: ูุชููุฑ โ              โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

**ุงููููุงุช:**
- `src/components/inventory/InventoryDialog.jsx` - ุฅุถุงูุฉ ุนุฑุถ ุงูุฅุญุตุงุฆูุงุช ุงูุฏููุงููููุฉ

---

## 3๏ธโฃ โ ุงูุฎุตู ุงูุชููุงุฆู ุนูุฏ ุงูุชุตุฏูุฑ

### ุงูุญุงูุฉ: **ููุชูู**

**ุงูุชูุงุตูู:**
- โ ุฏุงูุฉ `auto_deduct_inventory_on_export()` ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
- โ trigger ุชููุงุฆู ุนูุฏ ุฅูุดุงุก ูุงุชูุฑุฉ ุตุงุฏุฑุฉ
- โ ุฎุตู ุงููููุฉ ูู ุงููุฎุฒูู ุชููุงุฆูุงู
- โ ุชุณุฌูู ุงูุญุฑูุฉ ูู `inventory_transactions`
- โ ุชุญุฏูุซ ุณุฌู ุงูุชุบููุฑุงุช

**ุงูุขููุฉ:**
```sql
ุนูุฏ ุฅูุดุงุก ูุงุชูุฑุฉ ุตุงุฏุฑุฉ (invoices_out):
1. ูุชู ุญุณุงุจ ูุฌููุน ุงููููุฉ ุงููุจุงุนุฉ
2. ูุชู ุฎุตู ุงููููุฉ ูู inventory_items ุชููุงุฆูุงู
3. ูุชู ุชุณุฌูู ุงูุญุฑูุฉ ูู inventory_transactions
4. ูุชู ุชุญุฏูุซ changes_history
```

**ุงููููุงุช:**
- `UPDATE_INVENTORY_AND_FUEL_SYSTEMS.sql` - ุฏุงูุฉ `auto_deduct_inventory_on_export()`

---

## 4๏ธโฃ โ ูุธุงู ุงูุชูุจููุงุช ุงููุงุจู ููุชุฎุตูุต

### ุงูุญุงูุฉ: **ููุชูู**

**ุงูุชูุงุตูู:**
- โ ูู ูุชุฌุฑ ูุญุฏุฏ ุญุฏู ุงูุฎุงุต ููุชูุจูู
- โ ุญุฏ ูููุตู ููู ููุชุฌ
- โ ูุงุจู ููุชูุนูู ูุงูุชุนุทูู
- โ ุฌุฏูู `inventory_low_stock_alerts` ูุฎุตุต

**ุงููุธุงุฆู:**
```javascript
// ุงูุญุตูู ุนูู ุฌููุน ุงูุชูุจููุงุช
neonService.getLowStockAlerts(tenantId)

// ุฅูุดุงุก ุชูุจูู
neonService.createLowStockAlert(tenantId, data)

// ุชุญุฏูุซ ุงูุชูุจูู
neonService.updateLowStockAlert(alertId, data, tenantId)

// ุญุฐู ุงูุชูุจูู
neonService.deleteLowStockAlert(alertId, tenantId)

// ุงูุชุญูู ูู ุงูุญุฏูุฏ
neonService.checkLowStockAlerts(tenantId)
```

**ุงููููุงุช:**
- `UPDATE_INVENTORY_AND_FUEL_SYSTEMS.sql` - ุฌุฏูู ุงูุชูุจููุงุช
- `src/lib/neonService.js` - ุงูุฏูุงู

---

## 5๏ธโฃ โ ุงููุฆุงุช ูุงูุฃูุณุงู ูุฌููุน ุงููุชุงุฌุฑ

### ุงูุญุงูุฉ: **ููุชูู**

**ุงูุชูุงุตูู:**
- โ ุญูู `category` ูู ุงูููุชุฌุงุช
- โ ุญูู `category` ูู ุงูููุงุชูุฑ ุงูุตุงุฏุฑุฉ ูุงููุงุฑุฏุฉ
- โ ุชูุธูู ุงูููุชุฌุงุช ุญุณุจ ุงููุฆุงุช
- โ ุฅุญุตุงุฆูุงุช ูููุตูุฉ ููู ูุฆุฉ

**ุงูููุฒุงุช:**
- ุชุตููุฉ ุงูููุชุฌุงุช ุญุณุจ ุงููุฆุฉ
- ุฅุญุตุงุฆูุงุช ููู ูุฆุฉ (ุนุฏุฏ ุงูููุชุฌุงุชุ ุงููููุฉ ุงููููุฉุ ุงููููุฉ)

**ุงูุฏูุงู:**
```javascript
// ุงูุญุตูู ุนูู ุงูููุชุฌุงุช ุญุณุจ ุงููุฆุฉ
neonService.getInventoryByCategory(tenantId, category?)

// ุงูุฅุญุตุงุฆูุงุช ุงููุงููุฉ
neonService.getInventoryStatistics(tenantId)
```

**ุงููููุงุช:**
- `UPDATE_INVENTORY_AND_FUEL_SYSTEMS.sql` - ุฃุถููุช ุฃุนูุฏุฉ `category`
- `src/components/inventory/InventoryDialog.jsx` - ุญูู ุงููุฆุฉ ูู ุงููููุฐุฌ

---

## 6๏ธโฃ โ ุณุฌู ุงูุชุบููุฑุงุช (ูููุฎุฒูู ูุงูููุงุชูุฑ)

### ุงูุญุงูุฉ: **ููุชูู**

**ุงูุชูุงุตูู:**
- โ ุนููุฏ `changes_history` ูู ุงูููุชุฌุงุช
- โ ุนููุฏ `changes_history` ูู ุงูููุงุชูุฑ
- โ ุชุณุฌูู ุชููุงุฆู ููู ุชุบููุฑ
- โ ูุนูููุงุช ุดุงููุฉ: ููุ ูุชูุ ูุงุฐุง

**ูุนูููุงุช ุงูุชุบููุฑ ุงููุณุฌูุฉ:**
```json
{
  "timestamp": "2025-11-28T10:30:00Z",
  "changed_by": "user_uuid",
  "old_quantity": 100,
  "new_quantity": 85,
  "quantity_change": -15,
  "action": "quantity_update"
}
```

**ุงููููุงุช:**
- `UPDATE_INVENTORY_AND_FUEL_SYSTEMS.sql` - ุฏูุงู ุงูุชุชุจุน ุงูุชููุงุฆู

---

## 7๏ธโฃ โ ูุธุงู ุนุฏุงุฏุงุช ุงููุญุฑููุงุช (6 ุนุฏุงุฏุงุช)

### ุงูุญุงูุฉ: **ููุชูู**

**ุงูุชูุงุตูู:**
- โ ูุชุงุญ ููุท ูููุชุงุฌุฑ ุงูุชู ุชุฏุนู ุงููุญุฑููุงุช
- โ 6 ุนุฏุงุฏุงุช ูุงุจูุฉ ููุชุฎุตูุต ููู ูุชุฌุฑ
- โ ูู ุนุฏุงุฏ ูู:
  - ุงุณู ูุฎุตุต (ุงูุจูุฒูู 95ุ ุงูุฏูุฒูุ ุฅูุฎ)
  - ุฑูู ูุฑูุฏ (1-6)
  - ุณุนุฑ ุจูุน ููุชุฑ ุงููุงุญุฏ
  - ูุฑุงุกุงุช ุฃูููุฉ ูุญุงููุฉ

**ุงูุฌุฏุงูู:**
1. `fuel_counters` - ูุนูููุงุช ุงูุนุฏุงุฏุงุช
2. `fuel_counter_movements` - ุณุฌู ุงูุญุฑูุงุช
3. `fuel_daily_log` - ุงูุณุฌูุงุช ุงูููููุฉ

**ุงูุตูุญุฉ:**
- `src/pages/FuelCountersManagementPage.jsx` - ุตูุญุฉ ุงูุฅุฏุงุฑุฉ ุงูุดุงููุฉ

**ุงูููููุงุช:**
- `src/components/fuel/FuelCountersDialog.jsx` - ูููุฐุฌ ุฅุถุงูุฉ/ุชุนุฏูู
- `src/components/fuel/FuelCounterMovementsTable.jsx` - ุฌุฏูู ุงูุญุฑูุงุช

---

## 8๏ธโฃ โ ุงูุนูููุงุช ุงูุญุณุงุจูุฉ ุงูุชููุงุฆูุฉ ูููุญุฑููุงุช

### ุงูุญุงูุฉ: **ููุชูู**

**ุงูุญุณุงุจุงุช ุงูุชููุงุฆูุฉ:**

1. **ุงููููุฉ ุงููุจุงุนุฉ:**
   ```
   ุงููููุฉ = ุงููุฑุงุกุฉ ูุจู - ุงููุฑุงุกุฉ ุจุนุฏ
   ```

2. **ุงููุจูุบ ุงูุฅุฌูุงูู:**
   ```
   ุงููุจูุบ = ุงููููุฉ ร ุณุนุฑ ุงูุจูุน ููุชุฑ
   ```

3. **ุงููุชุจูู ุงููุญุณูุจ:**
   ```
   ุงููุชุจูู = ุงููุฑุงุกุฉ ุงูุฃูููุฉ - ุฅุฌูุงูู ุงููุจุงุน
   ```

4. **ุงูุฅูุฑุงุฏ ุงููุชููุน:**
   ```
   ุงูุฅูุฑุงุฏ = ุงููุฑุงุกุฉ ุงูุญุงููุฉ ร ุงูุณุนุฑ ููุชุฑ
   ```

**ุงูุฏูุงู:**
```javascript
// ุชุณุฌูู ุญุฑูุฉ ุนุฏุงุฏ
neonService.recordFuelCounterMovement(tenantId, data)

// ุญุณุงุจ ุงูููุฎุต
neonService.getFuelCountersSummary(tenantId)

// ุงูุณุฌูุงุช ุงูููููุฉ
neonService.createFuelDailyLog(tenantId, counterId, logDate)
```

**ุงููููุงุช:**
- `UPDATE_INVENTORY_AND_FUEL_SYSTEMS.sql` - ุฏุงูุฉ `record_fuel_counter_movement()`
- `src/lib/neonService.js` - ุงูุฏูุงู ุงููุณุงุนุฏุฉ

---

## 9๏ธโฃ โ ุงูุฑุจุท ุจุงููุชุงุฌุฑ ุงููุฎุชููุฉ

### ุงูุญุงูุฉ: **ููุชูู**

**ููุน ุงููุชุฌุฑ ูุงูููุฒุงุช:**

| ููุน ุงููุชุฌุฑ | ุงููุฎุฒูู | ุงููุฆุงุช | ุงูุชูุจููุงุช | ุงููุญุฑููุงุช |
|-----------|--------|--------|----------|----------|
| ูุชุฌุฑ ุนุงู | โ | โ | โ | โ |
| ูุชุฌุฑ ูุญุฑููุงุช | โ | โ | โ | โ |
| ูุชุฌุฑ + ูุญุฑููุงุช | โ | โ | โ | โ |
| ูุชุฌุฑ ุฅูุณุณูุงุฑุงุช | โ | โ | โ | โ |
| ูููู ุฅูุชุฑูุช | โ | โ | โ | โ |

**ุงูุชุญูู ุงูุชููุงุฆู:**
- ูุธุงู ุงููุญุฑููุงุช ูุชุญูู ูู ููุน ุงููุชุฌุฑ
- ูุง ูุณูุญ ุจุงููุตูู ุฅูุง ูููุชุงุฌุฑ ุงููุฏุนููุฉ
- ุฑุณุงูุฉ ูุงุถุญุฉ ุนูุฏ ูุญุงููุฉ ุงููุตูู ูู ูุชุฌุฑ ุบูุฑ ูุฏุนูู

---

## ๐ ููุฎุต ุงูููุงุท ุงููููุฐุฉ

| ุงูููุฒุฉ | ุงูุญุงูุฉ | ููุงุญุธุงุช |
|--------|--------|----------|
| ุฑูุฒ ุงูููุชุฌ ุงุฎุชูุงุฑู | โ | ุฌุนู `product_code` ุงุฎุชูุงุฑู |
| ุฅุญุตุงุฆูุงุช ุงููุชููุฑ | โ | ุนุฑุถ ููุฑู ูู ุงููููุฐุฌ |
| ุงูุฎุตู ุงูุชููุงุฆู | โ | ุนูุฏ ูู ูุงุชูุฑุฉ ุตุงุฏุฑุฉ |
| ุงูุชูุจููุงุช ุงููุฎุตุตุฉ | โ | ููู ูุชุฌุฑ ููู ููุชุฌ |
| ุงููุฆุงุช ูุงูุฃูุณุงู | โ | ูู ุฌููุน ุงููุชุงุฌุฑ |
| ุณุฌู ุงูุชุบููุฑุงุช | โ | ุชุณุฌูู ุชููุงุฆู ุดุงูู |
| 6 ุนุฏุงุฏุงุช ูุญุฑููุงุช | โ | ูููุชุงุฌุฑ ุงููุฏุนููุฉ |
| ุงูุญุณุงุจุงุช ุงูุชููุงุฆูุฉ | โ | ููู ุนุฏุงุฏ |

---

## ๐๏ธ ุงููููุงุช ุงูููุดุฃุฉ/ุงููุนุฏูุฉ

### ูููุงุช SQL:
- โ `UPDATE_INVENTORY_AND_FUEL_SYSTEMS.sql` - ุงูุชุญุฏูุซุงุช ุงูุดุงููุฉ

### ูููุงุช React/JS:
- โ `src/components/inventory/InventoryDialog.jsx` - ูุญุฏูุซ
- โ `src/components/fuel/FuelCountersDialog.jsx` - ุฌุฏูุฏ
- โ `src/components/fuel/FuelCounterMovementsTable.jsx` - ุฌุฏูุฏ
- โ `src/pages/FuelCountersManagementPage.jsx` - ุฌุฏูุฏ
- โ `src/lib/neonService.js` - ูุญุฏูุซ ุจู 15+ ุฏุงูุฉ ุฌุฏูุฏุฉ

### ูููุงุช ุงูุชูุซูู:
- โ `FUEL_AND_INVENTORY_UPDATE_GUIDE.md` - ุฏููู ุดุงูู

---

## ๐ ุงูุฎุทูุงุช ุงูุชุงููุฉ

1. **ุชุทุจูู ุงูุชุฑุญูู:**
   ```bash
   ูู ุจุชุดุบูู UPDATE_INVENTORY_AND_FUEL_SYSTEMS.sql ุนูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
   ```

2. **ุงูุงุฎุชุจุงุฑ:**
   - ุงุฎุชุจุฑ ูููุฐุฌ ุงููุฎุฒูู ุงูุฌุฏูุฏ
   - ุงุฎุชุจุฑ ุฅุถุงูุฉ ุงูุนุฏุงุฏุงุช
   - ุงุฎุชุจุฑ ุงูุชูุจููุงุช

3. **ุงููุดุฑ:**
   - ุฏูุน ุงูุชุญุฏูุซุงุช
   - ุฅุฎุจุงุฑ ุงููุณุชุฎุฏููู ุจุงูููุฒุงุช ุงูุฌุฏูุฏุฉ

---

## ๐ ููุงุญุธุงุช ูููุฉ

- โ ุฌููุน ุงูุญุณุงุจุงุช ุชุชู **ุชููุงุฆูุงู**
- โ ุณุฌู ุงูุชุบููุฑุงุช ูุญุชูุธ ุจู **ุชุงุฑูุฎ ูุงูู**
- โ ุงูุชูุจููุงุช **ูุงุจูุฉ ููุชุนุทูู**
- โ ูุธุงู ุงููุญุฑููุงุช **ุขูู ููุญูู**
- โ **ูุง ุชูุฌุฏ ูุดุงูู ูู ุงูุชูุงูููุฉ**

---

**ุญุงูุฉ ุงููุดุฑูุน: โ ููุชูู ุจูุฌุงุญ**

**ุขุฎุฑ ุชุญุฏูุซ:** 28 ููููุจุฑ 2025
